{% extends "party/base.html" %}

{% block title %}Invito {{ invite.name }}{% endblock %}

{% block content %}
<div class="content">
  <div class="container ticket_container p-3">
    <div class="vitto-toast d-none">
      <div class="vitto-toast-body">
        Grazie per la risposta! 
      </div>
    </div>


    <!-- TOP SVG -->
    {% include "party/top_noholes.svg" %}
    <div class="ticket px-4 pt-2 pb-1">
        {% comment %} <div class="outside-star star-tl">{% include "party/star5.svg" %}</div>
        <div class="outside-star star-tr">{% include "party/star5.svg" %}</div> {% endcomment %}
        {% comment %} <div class="outside-star star-bl">{% include "party/star5.svg" %}</div>
        <div class="outside-star star-br">{% include "party/star5.svg" %}</div> {% endcomment %}
        <h1 class="card-title circus pb-2">{{ invite.name|upper }}</h1>
        <p class="card-text">
          Ciao!
          Sei stat&#601; ufficialmente invitat&#601; al mio evento. 
          Si terr√† a Foligno il <strong>14 Aprile 2023</strong> alle ore 21:30 presso Casa Pippi in <a href="https://goo.gl/maps/k4jq3pL7XDrAudHj7">Via del Roccolo 4</a>. 
        </p>
        {% if invite.fuorisede %}
        <p class="card-text">
          Te che non sei di Foligno sappi che posso ospitarti senza problemi,
          tuttavia mi occorre sapere se partecipi o meno ASAP.
        </p>
        {% endif %}
        <p class="card-text">
          Come immagino ben saprai, qualche giorno prima, √® il mio compleanno
          e quest‚Äôanno ho proprio voglia di esagerare un po‚Äô (io paxxo)
        </p>
        <p class="card-text">
          Sar√† un evento a <strong>tema Disney</strong>, motivo per cui, se vuoi partecipare,
          dovrai indossare un costume ispirato a quel mondo! Ti consiglio di lasciarti ispirare dal <a href="https://www.justwatch.com/it/provider/disney-plus">catalogo Disney+</a>. 
          <strong>Mi raccomando, senza costume non si entra ;)</strong>
        </p>

        {% if not fake %}
        <p class="card-text">
          <strong>Rispondi qua sotto</strong>, non √® vincolante, per√≤ mi aiuter√† a organizzare tutto al meglio ‚ù§Ô∏è  
        </p>
        {% endif %}   

        <p class="collapse-p">
          <button class="collapse-btn" type="button" data-bs-toggle="collapse" onclick="$(this).toggleClass('active')"
          data-bs-target="#collapseExample" aria-expanded="false" aria-controls="collapseExample">
            MAGGIORI INFORMAZIONI
          </button>
        </p>
        <div class="collapse p-0" id="collapseExample">
          <div class="collapse-card pb-0">
            <p class="card-text mt-0">
              Alla festa sar√† presente un <strong>set fotografico professionale</strong> sponsorizzato da <a href="https://www.instagram.com/matteociri/">@matteociri</a> (dicono che √® bravo).
            </p>
            <p class="card-text mt-4">
              Mentre insieme a <a href="https://www.instagram.com/lollyvalentini/">@lollyvalentini</a>, prepareremo la sala in modo tale da poter <strong>cantare e ballare</strong> tutte le canzoni che vogliamo (Disney e non).
            </p>
            <p class="card-text mt-4">
              Nel caso in cui ti fossi dimenticato che l‚Äôironia √® il sale della vita,
              ricordati che fa sempre bene ridere e divertirsi. Per questo ti consiglio
              di <strong>prepararti una performance!</strong>
            </p>
            <p class="card-text mt-4">
              La <a href="https://www.youtube.com/results?search_query=Lip+Sync+Battles">Lip Sync Battle</a> √® la prima che mi √® venuta in mente,
               facile, divertente e liberatoria! Ovviamente non c‚Äô√® limite alla tua creativit√†. Stupiscici con balli, canti e quello che ti fa sentire meglio. Il regalo pi√π bello che puoi farmi √® organizzarti
               per mostrare a tutti la tua miglior performance.
            </p>
            <p class="card-text mt-4">
              Non hai scuse! Ti ho anche messo qui sotto degli
              esempi di ispirazione. (il primo spazale)
            </p>
            <a class="youtube tatum mb-2" href="https://www.youtube.com/watch?v=OFoogpXEVoY" target="_blank"><div class="overlay"></div>{% include "party/play.svg" %}</a>
            <a class="youtube tom mb-2" href="https://www.youtube.com/watch?v=jPCJIB1f7jk" target="_blank"><div class="overlay"></div>{% include "party/play.svg" %}</a>
            <a class="youtube neil" href="https://www.youtube.com/watch?v=JAw9dDL9fjk" target="_blank"><div class="overlay"></div>{% include "party/play.svg" %}</a>
            <p class="card-text mt-4">
              E per i pi√π timidi? 
            </p>
            <p class="card-text">
              Ho pensato anche a lor&#601; per essere inclusivi e clementi. 
              Si pu√≤ <strong>partecipare in gruppo</strong> e battere la concorrenza con performance ancor pi√π complesse üï∫
            </p>
            <p class="card-text mt-4">
              Ci vediamo in pista, per sfidarci con movimenti sciolti e per conquistare
              il <strong>premio</strong> che ho pensato per rendere il tutto pi√π avvincente üòè
            </p>
            <div class="three-stars d-flex justify-content-center mb-2">
              {% include "party/star5.svg" %}
              {% include "party/star5.svg" %}
              {% include "party/star5.svg" %}
            </div>
          </div>
        </div>
    </div>

    {% if not fake %}
    <!-- MIDDLE SVG -->
    {% include "party/mid_smholes.svg" %}
    <div class="ticket px-4 ticket_bottom">
      <div class="left">
        <div>
          {% include "party/star.svg" %}
          {% include "party/date.svg" %}
        </div>
      </div>
      <div class="ticket_form right">
          <h3 class="mb-2">QUINDI?</h3>
          <div class="checkbox {% if invite.state == "YE" %}active{% endif %}">
            <div class="box">
              <svg class="single-tick" xmlns="http://www.w3.org/2000/svg"  viewBox="0 0 32 32" width="32px" height="32px"><path d="M 28.28125 6.28125 L 11 23.5625 L 3.71875 16.28125 L 2.28125 17.71875 L 10.28125 25.71875 L 11 26.40625 L 11.71875 25.71875 L 29.71875 7.71875 Z"/></svg>
            </div>
            <div class="text" data-value="YE">CI SONO!</div></div>
          <div class="checkbox {% if invite.state == "NO" %}active{% endif %}"><div class="box">
            <svg class="cross" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20.13 20.13"><g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><rect x="-3.16" y="9.06" width="26.45" height="2.01" transform="translate(-4.17 10.06) rotate(-45)"/><rect x="-3.16" y="9.06" width="26.45" height="2.01" transform="translate(10.06 -4.17) rotate(45)"/></g></g></svg>
          </div><div class="text" data-value="NO">NON POSSO</div></div>
          <div class="checkbox  {% if invite.state == "+1" %}active{% endif %}"><div class="box">
            <svg class="double-tick" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 35.81 20.13"><g id="Layer_2" data-name="Layer 2"><g id="Layer_1-2" data-name="Layer 1"><path d="M26,0,8.72,17.28,1.44,10,0,11.44l8,8,.72.69.72-.69,18-18Z"/><path d="M34.37,0,17.09,17.28,9.81,10,8.37,11.44l8,8,.72.69.72-.69,18-18Z"/></g></g></svg>
          </div><div class="text" data-value="+1">CI SIAMO! +1</div></div>
      </div>
    </div>
    {% endif %}
    <!-- BOTTOM SVG -->
    {% include "party/bottom_noholes.svg" %}
  </div>
</div>

{% endblock %}

{% block script %}
<script>
  function set_partecipation(partecipation) {
    console.log(partecipation);
    $.post(window.location, {attending: partecipation});
  }

  function show_toast(msg) {
    $('.vitto-toast').removeClass('d-none');
    $('.vitto-toast').addClass('show');
  
    setTimeout(function() {
      $('.vitto-toast').removeClass('show');
    }, 2000);
  }

  $(document).ready(function() {
    $('.checkbox').click(function() {
      if ($(this).hasClass('active')) {
        set_partecipation('PD');
      } else {
        show_toast('Salvato!');
        set_partecipation($(this).find('.text').data('value'));
        $('.checkbox').removeClass('active');
      }
      $(this).toggleClass('active');
    });
  });
</script>
{% endblock %}